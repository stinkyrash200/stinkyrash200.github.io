---
layout: post
title: Basic Pentesting Writeup
subtitle: Basic Pentesting writeup
cover-img: /assets/img/basic-pentesting-writeup/portada1.png
thumbnail-img: /assets/img/basic-pentesting-writeup/portada1.png
share-img: /assets/img/path.jpg
tags: [linux, fácil, tryhackme, writeup]
excerpt: "En este post vamos a resolver la máquina Basic Pentesting de la plataforma tryhackme. Esta es una máquina de dificultad fácil con bastante enumeración. Espero que la disfrutéis."
---

Hecho por boyras200
<br>
<br>

# En este post vamos a resolver la máquina Basic Pentesting de la plataforma tryhackme. Esta es una máquina de dificultad fácil con bastante enumeración. Espero que la disfrutéis.

<br>
<br>
<p align="center">
     <img src="/assets/img/basic-pentesting-writeup/icono.png">
</p>

<center> Basic Pentesting </center>

<br>

<br>
Empezamos haciendo un escaneo de puertos:

![](/assets/img/basic-pentesting-writeup/nmap.txt.PNG)

```
sudo nmap {IP} -sS -sC -O
```

Vemos unos cuantos puertos abiertos. Vamos a empezar inspeccionando la web:

![](/assets/img/basic-pentesting-writeup/web.PNG)

Vemos que esta bajo mantenimiento. Vamos a hacer enumeración web con ***gobuster*** para buscar posibles rutas y directorios:

![](/assets/img/basic-pentesting-writeup/gobuster.PNG)


```
gobuster -u http://{IP} -w /usr/share/wordlists/dirb/common.txt dir
```


Encontramos un directorio llamado “development”, vamos a inspeccionarlo:

![](/assets/img/basic-pentesting-writeup/development.PNG)

Nos topamos con dos archivos, vamos a leerlos:

![](/assets/img/basic-pentesting-writeup/nota1.PNG)

![](/assets/img/basic-pentesting-writeup/nota2.PNG)

El primer archivo no tiene importancia, pero el segundo contiene información interesante. Este nos dice que la contraseña de “J” es débil, así que podríamos intentar un ataque de fuerza bruta contra esta. Pero para esto necesitamos el usuario de “J”, así que vamos a ver si lo podemos averiguar.

{: .box-note}
**Nota:** Se denomina ataque de fuerza bruta cuando un atacante, por medio de diferentes técnicas, prueba diferentes combinaciones para acceder a la contraseña del usuario y así tener acceso a sus cuentas o perfiles en diferentes plataformas.

Dado que esta máquina tiene habilitado el servicio SMB, podemos intentar sacar los usuarios existentes en la máquina enumerando SMB con el comando ***enum4linux***: 

![](/assets/img/basic-pentesting-writeup/enum4linux.PNG)

```
enum4linux {IP}
```

Ya tenemos los usuarios, dado que quien poseía una contraseña débil era jan(“J”), podemos hacerle un ataque de fuerza bruta. Vamos a hacérselo por el servicio SSH. Para el ataque de fuerza bruta vamos a usar una herramienta llamada hydra, que sirve para este tipo de ataques:

![](/assets/img/basic-pentesting-writeup/hydra1.PNG)

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt -f -vV {IP} ssh
```

En los ataques de fuerza bruta se utilizan diccionarios, que son listas que tienen una gran cantidad de contraseñas que son muy utilizadas. Rockyou es uno de los diccionarios más grandes que existen.

![](/assets/img/basic-pentesting-writeup/hydra2.PNG)

Ya tenemos la contraseña. Nos conectamos por SSH con el usuario jan, para conectarnos a la máquina mediante SSH utilizaremos el siguiente comando:

```
ssh jan@{IP}
```

![](/assets/img/basic-pentesting-writeup/ssh1.PNG)

En el directorio del usuario jan no hay nada, pero en el del usuario kay tenemos la contraseña que nos pide tryhackme (pass.bak). Tenemos que tener los permisos del usuario kay para leerla. Encontramos un directorio .shh, vamos a inspecionarlo:

![](/assets/img/basic-pentesting-writeup/ssh2.PNG)

Vemos que hay un id_rsa que podemos usar para acceder a SSH como el usuario kay.


{: .box-note}
**Nota:** Una id_rsa es una “llave” para acceder a una máquina como un usuario determinado. Se podría decir que la id_rsa.pub es el “candado” y la id_rsa es la “llave” de este.


Copiamos el contenido de la id_rsa y la pegamos en nuestra máquina. Vemos que la id_rsa está encriptada:

![](/assets/img/basic-pentesting-writeup/id_rsa.PNG)

Para descifrarla vamos a usar ***john***. ***John*** es una herramienta que sirve para descifrar hashes.

![](/assets/img/basic-pentesting-writeup/john.PNG)

```
ssh2john id_rsa > hash | john hash --wordlists=/usr/share/wordlists/rockyou.txt
```

Con ***ssh2john*** obtenemos el hash de la id_rsa. Al momento de descifrar el hash ***john*** tardaba mucho, así que utilice el diccionario Rockyou y con este diccionario ***john*** descifro el hash al instante, ahora nos vamos a conectar por SSH como el usuario kay:

![](/assets/img/basic-pentesting-writeup/id_rsa2.PNG)

Nos dice que para poder usar la id_rsa para conectarnos ningún usuario que no fuera el nuestro debería poder acceder a esta. Ejecutamos el siguiente comando para arreglar el problema:

```
chmod 700 id_rsa 
```

![](/assets/img/basic-pentesting-writeup/pass_bak.PNG)

```
ssh kay@{IP} -i id_rsa
```

Acabamos accediendo a la máquina como usuario kay, y leyendo el archivo.

# Hemos comprometido la máquina Basic Pentesting. Espero que os haya gustado y que hayáis comprendido la resolución. Hasta la próxima!!!

![](/assets/img/basic-pentesting-writeup/portada1.png)




